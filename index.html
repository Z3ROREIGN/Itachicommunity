<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Itachicommunity</title>
<link rel="icon" href="https://cdn.discordapp.com/icons/1320983244497223711/dfe7868a75d2b32245482e9913804b85.png?size=64" />
<style>
  /* RESET */
  * {
    margin:0; padding:0; box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  body {
    background: linear-gradient(135deg, #0b0000, #2a0000);
    color: #eee;
    min-height: 100vh;
    overflow-x: hidden;
    user-select: none;
    position: relative;
  }

  /* Corvos animados */
  .crow {
    position: fixed;
    width: 40px;
    height: 40px;
    background: url('https://i.ibb.co/7jSGZPx/crow-black.png') no-repeat center / contain;
    animation-timing-function: ease-in-out;
    pointer-events: none;
    z-index: 2;
  }
  @keyframes fly1 {
    0% {transform: translate(-100px, 100px) rotate(0deg);}
    50% {transform: translate(300px, 50px) rotate(20deg);}
    100% {transform: translate(-100px, 100px) rotate(0deg);}
  }
  @keyframes fly2 {
    0% {transform: translate(100vw, 150px) rotate(0deg);}
    50% {transform: translate(50vw, 80px) rotate(-20deg);}
    100% {transform: translate(100vw, 150px) rotate(0deg);}
  }
  @keyframes fly3 {
    0% {transform: translate(-50px, 250px) rotate(0deg);}
    50% {transform: translate(350px, 220px) rotate(15deg);}
    100% {transform: translate(-50px, 250px) rotate(0deg);}
  }
  .crow.fly1 { top: 100px; left: 0; animation: fly1 20s infinite; animation-delay: 0s; }
  .crow.fly2 { top: 150px; left: 0; animation: fly2 30s infinite; animation-delay: 10s; }
  .crow.fly3 { top: 250px; left: 0; animation: fly3 25s infinite; animation-delay: 5s; }

  main {
    max-width: 980px;
    margin: 100px auto 80px;
    background: rgba(30,0,0,0.75);
    border-radius: 15px;
    padding: 28px 32px 40px;
    box-shadow: 0 0 24px #ff0000cc;
    backdrop-filter: saturate(180%) blur(8px);
    position: relative;
    z-index: 3;
  }

  header {
    text-align: center;
    margin-bottom: 24px;
    position: relative;
    user-select:none;
  }
  header img.logo {
    width: 120px;
    border-radius: 18px;
    filter: drop-shadow(0 0 12px #ff0000cc);
    animation: floatItachi 6s ease-in-out infinite;
  }
  @keyframes floatItachi {
    0%,100% {transform: translateY(0);}
    50% {transform: translateY(-14px);}
  }
  header h1 {
    font-size: 3.2rem;
    font-weight: 900;
    color: #ff2222;
    text-shadow: 0 0 28px #ff1111cc;
    margin-top: 14px;
  }
  header p.subtitle {
    font-size: 1.15rem;
    color: #dd5555cc;
    font-style: italic;
    font-weight: 600;
  }

  /* Botões filtro */
  #filters {
    display: flex;
    justify-content: center;
    gap: 14px;
    margin-bottom: 28px;
    flex-wrap: wrap;
  }
  #filters button {
    border: 2.6px solid #ff2a2a;
    background: transparent;
    color: #ff2a2a;
    padding: 10px 22px;
    border-radius: 40px;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    text-transform: uppercase;
    box-shadow: 0 0 14px #ff2a2a99;
    transition: background-color 0.3s ease, transform 0.25s ease;
    position: relative;
    overflow: hidden;
    user-select:none;
  }
  #filters button:hover, #filters button.active {
    background-color: #ff2a2a;
    color: #300000;
    box-shadow: 0 0 26px #ff2a2a;
    transform: scale(1.1);
  }
  #filters button:hover::after,
  #filters button.active::after {
    content: '';
    position: absolute;
    top: 50%;
    right: -20px;
    width: 32px;
    height: 32px;
    background: url('https://i.ibb.co/7jSGZPx/crow-black.png') no-repeat center center / contain;
    transform: translateY(-50%);
    animation: crowFlyOut 1.2s ease forwards;
    pointer-events:none;
  }
  @keyframes crowFlyOut {
    0% { right: -20px; opacity: 1; transform: translateY(-50%) scale(1);}
    100% { right: 120%; opacity: 0; transform: translateY(-50%) scale(0.3);}
  }

  /* Produtos */
  #products-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
    gap: 20px;
  }
  .product-card {
    background: #330000cc;
    padding: 18px 20px;
    border-radius: 20px;
    box-shadow: 0 0 20px #ff2a2a88 inset;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: transform 0.3s ease;
    user-select:none;
  }
  .product-card:hover {
    transform: translateY(-7px);
    box-shadow: 0 0 32px #ff2a2acc inset;
  }
  .product-card h3 {
    font-size: 1.3rem;
    font-weight: 800;
    color: #ff4545;
    margin-bottom: 8px;
    text-shadow: 0 0 14px #ff0000aa;
  }
  .product-card p {
    flex-grow: 1;
    color: #ffbaba;
    font-weight: 500;
    margin-bottom: 15px;
    text-shadow: 0 0 8px #660000aa;
  }
  .product-price {
    font-weight: 900;
    color: #ffbbbb;
    font-size: 1.15rem;
    margin-bottom: 14px;
    text-shadow: 0 0 18px #ff1111cc;
  }
  .buy-btn {
    background: #ff2a2a;
    border: none;
    color: #330000;
    font-weight: 700;
    padding: 14px 0;
    border-radius: 40px;
    cursor: pointer;
    font-size: 1.1rem;
    box-shadow: 0 0 22px #ff2a2acc;
    text-transform: uppercase;
    transition: background-color 0.4s ease, transform 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  .buy-btn:hover {
    background: #aa0000;
    color: #fff;
    box-shadow: 0 0 36px #ff4444cc;
    transform: scale(1.05);
  }
  .buy-btn:hover::after {
    content: '';
    position: absolute;
    top: 50%;
    right: -40px;
    width: 30px;
    height: 30px;
    background: url('https://i.ibb.co/7jSGZPx/crow-black.png') no-repeat center / contain;
    transform: translateY(-50%);
    animation: crowFlyOut 1.2s ease forwards;
    pointer-events:none;
  }

  /* Modais */
  .modal, #purchase-modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(20,0,0,0.85);
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn 0.5s ease forwards;
  }
  .modal[aria-hidden="false"], #purchase-modal[aria-hidden="false"] {
    display: flex;
  }
  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }
  .modal-content {
    background: #3a0000dd;
    padding: 32px 30px 40px;
    border-radius: 20px;
    max-width: 420px;
    width: 95%;
    box-shadow: 0 0 30px #ff2a2aaa;
    text-align: center;
    color: #ffbbbb;
    font-weight: 700;
    user-select:none;
    position: relative;
  }
  .modal-close {
    position: absolute;
    top: 14px;
    right: 14px;
    background: transparent;
    border: none;
    font-size: 1.8rem;
    color: #ff6666;
    cursor: pointer;
    font-weight: 900;
    transition: color 0.3s ease;
  }
  .modal-close:hover {
    color: #ff0000;
  }
  .modal-content input {
    width: 90%;
    padding: 12px 14px;
    margin: 18px 0 28px;
    border-radius: 14px;
    border: 2px solid #ff2a2acc;
    background: #4a000011;
    color: #ffbbbb;
    font-weight: 700;
    font-size: 1rem;
    text-align: center;
    transition: border-color 0.3s ease;
  }
  .modal-content input:focus {
    outline: none;
    border-color: #ff4444;
    box-shadow: 0 0 12px #ff2a2acc;
    background: #60000022;
  }
  .modal-submit-btn {
    background: #ff2a2a;
    border: none;
    color: #330000;
    font-weight: 900;
    font-size: 1.2rem;
    padding: 16px 0;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 0 28px #ff2a2acc;
    user-select:none;
    transition: background-color 0.3s ease, transform 0.25s ease;
    width: 90%;
  }
  .modal-submit-btn:hover {
    background: #aa0000;
    color: #fff;
    transform: scale(1.06);
    box-shadow: 0 0 48px #ff4444cc;
  }
  #toggle-to-register, #toggle-to-login {
    margin-top: 14px;
    display: inline-block;
    color: #ff6666;
    cursor: pointer;
    font-weight: 700;
    user-select:none;
    transition: color 0.3s ease;
  }
  #toggle-to-register:hover, #toggle-to-login:hover {
    color: #ff0000;
  }

  /* Notificações */
  #notification-container {
    position: fixed;
    top: 20px;
    right: 20px;
    max-width: 320px;
    z-index: 10500;
  }
  .notification {
    background: #440000dd;
    color: #ffbbbb;
    font-weight: 700;
    border-left: 6px solid #ff2a2a;
    padding: 14px 20px;
    margin-bottom: 10px;
    border-radius: 8px;
    box-shadow: 0 0 20px #ff2a2aaa;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    animation: fadeInUp 0.5s ease forwards;
  }
  .notification.success { border-color: #0f0; background: #003300cc; color: #b3ffb3; }
  .notification.error { border-color: #f00; background: #330000cc; color: #ff9999; }
  .notification.info { border-color: #09f; background: #001133cc; color: #99ccff; }
  .notification .icon {
    font-size: 1.3rem;
    user-select:none;
  }
  @keyframes fadeInUp {
    from {opacity: 0; transform: translateY(15px);}
    to {opacity: 1; transform: translateY(0);}
  }
  @keyframes fadeOut {
    from {opacity: 1;}
    to {opacity: 0;}
  }

  /* Modal compra */
  #purchase-info {
    margin-bottom: 20px;
    font-size: 1.1rem;
    font-weight: 700;
    color: #ffbbbb;
  }
  #pix-code {
    width: 100%;
    height: 80px;
    resize: none;
    border-radius: 14px;
    border: 2px solid #ff2a2acc;
    background: #4a000022;
    color: #ffbbbb;
    font-weight: 700;
    font-size: 1rem;
    padding: 12px;
    font-family: monospace;
    user-select: all;
  }
  #confirm-payment-btn {
    background: #ff2a2a;
    border: none;
    color: #330000;
    font-weight: 900;
    font-size: 1.2rem;
    padding: 16px 0;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 0 28px #ff2a2acc;
    width: 100%;
    user-select:none;
    transition: background-color 0.3s ease, transform 0.25s ease;
  }
  #confirm-payment-btn:hover {
    background: #aa0000;
    color: #fff;
    transform: scale(1.05);
    box-shadow: 0 0 48px #ff4444cc;
  }

  /* User info + logout */
  #user-info {
    text-align: right;
    margin-bottom: 20px;
    font-weight: 700;
    color: #ff4444;
    user-select:none;
  }
  #logout-btn {
    background: transparent;
    border: 2px solid #ff2a2a;
    color: #ff2a2a;
    padding: 6px 14px;
    margin-left: 18px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 700;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  #logout-btn:hover {
    background-color: #ff2a2a;
    color: #300000;
  }

  /* Botões Login/Registro externos */
  #login-register-buttons {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 24px;
  }
  #login-register-buttons button {
    border: 2.6px solid #ff2a2a;
    background: transparent;
    color: #ff2a2a;
    padding: 14px 28px;
    border-radius: 40px;
    font-weight: 700;
    font-size: 1.2rem;
    cursor: pointer;
    text-transform: uppercase;
    box-shadow: 0 0 16px #ff2a2a88;
    transition: background-color 0.3s ease, transform 0.25s ease;
    user-select:none;
    position: relative;
    overflow: hidden;
  }
  #login-register-buttons button:hover {
    background-color: #ff2a2a;
    color: #300000;
    box-shadow: 0 0 30px #ff2a2a;
    transform: scale(1.05);
  }
  #login-register-buttons button:hover::after {
    content: '';
    position: absolute;
    top: 50%;
    right: -40px;
    width: 32px;
    height: 32px;
    background: url('https://i.ibb.co/7jSGZPx/crow-black.png') no-repeat center / contain;
    transform: translateY(-50%);
    animation: crowFlyOut 1.2s ease forwards;
    pointer-events:none;
  }

  /* Botão Discord fixo inferior direito */
  #discord-button, #help-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    border-radius: 16px;
    cursor: pointer;
    box-shadow: 0 0 18px #ff2a2aaa;
    user-select:none;
    transition: box-shadow 0.3s ease, transform 0.3s ease;
    z-index: 10500;
    background: #330000cc url('https://cdn.discordapp.com/icons/1320983244497223711/dfe7868a75d2b32245482e9913804b85.png') no-repeat center / cover;
  }
  #discord-button:hover, #help-button:hover {
    box-shadow: 0 0 40px #ff2a2aee;
    transform: scale(1.1);
  }
  #help-button {
    right: 90px;
    background: #330000cc url('https://cdn.discordapp.com/icons/1320983244497223711/dfe7868a75d2b32245482e9913804b85.png') no-repeat center / cover;
  }
  #help-button::after {
    content: 'Atendimento';
    position: absolute;
    bottom: 80px;
    right: 0;
    width: 120px;
    padding: 8px 12px;
    background: #ff2a2a;
    border-radius: 14px;
    font-weight: 700;
    font-size: 0.9rem;
    color: #330000;
    text-align: center;
    text-transform: uppercase;
    box-shadow: 0 0 14px #ff2a2aaa;
    user-select:none;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s ease;
  }
  #help-button:hover::after {
    opacity: 1;
    pointer-events: auto;
  }

  /* Responsividade simples */
  @media (max-width: 560px) {
    main {
      margin: 60px 12px 60px;
      padding: 24px 18px 36px;
    }
    header h1 {
      font-size: 2.4rem;
    }
    #filters {
      gap: 10px;
    }
    #filters button {
      font-size: 0.9rem;
      padding: 8px 16px;
    }
    .product-card {
      padding: 14px 16px;
    }
    .product-card h3 {
      font-size: 1.1rem;
    }
    .buy-btn {
      font-size: 1rem;
      padding: 12px 0;
    }
    #login-register-buttons button {
      font-size: 1rem;
      padding: 12px 22px;
    }
  }
</style>
</head>
<body>

<!-- Corvos animados -->
<div class="crow fly1"></div>
<div class="crow fly2"></div>
<div class="crow fly3"></div>

<main>
  <header>
    <img class="logo" src="https://cdn.discordapp.com/icons/1320983244497223711/dfe7868a75d2b32245482e9913804b85.png?size=256" alt="Itachicommunity Logo" />
    <h1>Itachicommunity</h1>
    <p class="subtitle">A loja mais barata e entrega manual — Pets, contas e sementes para seus jogos favoritos! <br> Bloxs, Brainrots, Grow a Garden e muito mais.</p>
  </header>

  <div id="user-info" style="display:none;">
    Olá, <span id="user-name"></span>!
    <button id="logout-btn" title="Sair">Sair</button>
  </div>

  <div id="login-register-buttons">
    <button id="btn-login">Login</button>
    <button id="btn-register">Registrar</button>
  </div>

  <section id="filters" aria-label="Categorias de produtos">
    <button data-category="growagarden" class="active" aria-pressed="true">Grow a Garden</button>
    <button data-category="roubeumbrainrot" aria-pressed="false">Roube um Brainrot</button>
    <button data-category="bloxfruits" aria-pressed="false">Blox Fruits</button>
  </section>

  <section id="products-container" aria-live="polite" aria-atomic="true"></section>
</main>

<!-- Modal Login -->
<div class="modal" id="modal-login" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modal-login-title">
  <div class="modal-content">
    <button class="modal-close" aria-label="Fechar">&times;</button>
    <h2 id="modal-login-title" style="color:#ff4444; margin-bottom:20px;">Login</h2>
    <input type="text" id="login-email" placeholder="Seu email" autocomplete="username" aria-label="Email de login" />
    <input type="password" id="login-password" placeholder="Sua senha" autocomplete="current-password" aria-label="Senha de login" />
    <button class="modal-submit-btn" id="login-submit">Entrar</button>
    <p style="margin-top:14px; color:#ff7777;">Ainda não tem conta? <span id="open-register" style="cursor:pointer; color:#ff2222; font-weight:900;">Registre-se</span></p>
  </div>
</div>

<!-- Modal Registro -->
<div class="modal" id="modal-register" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modal-register-title">
  <div class="modal-content">
    <button class="modal-close" aria-label="Fechar">&times;</button>
    <h2 id="modal-register-title" style="color:#ff4444; margin-bottom:20px;">Registrar</h2>
    <input type="text" id="register-email" placeholder="Seu email" autocomplete="username" aria-label="Email de registro" />
    <input type="password" id="register-password" placeholder="Sua senha" autocomplete="new-password" aria-label="Senha de registro" />
    <button class="modal-submit-btn" id="register-submit">Registrar</button>
    <p style="margin-top:14px; color:#ff7777;">Já tem conta? <span id="open-login" style="cursor:pointer; color:#ff2222; font-weight:900;">Faça login</span></p>
  </div>
</div>

<!-- Modal Compra -->
<div class="modal" id="purchase-modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="purchase-modal-title">
  <div class="modal-content">
    <button class="modal-close" aria-label="Fechar">&times;</button>
    <h2 id="purchase-modal-title" style="color:#ff4444; margin-bottom:20px;">Compra</h2>
    <p id="purchase-info"></p>
    <textarea id="pix-code" readonly aria-label="Código Pix para pagamento"></textarea>
    <button id="confirm-payment-btn">Verificar pagamento</button>
  </div>
</div>

<!-- Notificações -->
<div id="notification-container" aria-live="polite" aria-atomic="true"></div>

<!-- Botões fixos -->
<div id="discord-button" title="Servidor Discord"></div>
<div id="help-button" title="Atendimento"></div>

<script>
(() => {
  "use strict";

  // Produtos demo (10 por categoria)
  const products = {
    growagarden: [
      { id: 1, name: "Raccon 🐼", description: "Rouba Fruta de um Jogador", price: "R$40,00" },
      { id: 2, name: "Dragonfly 🐉", description: "Da mutação de ouro para alguma fruta de seu jardim", price: "R$30,00" },
      { id: 3, name: "Mimic octopus 🐙", description: "Se transforma em algum pet de seu jardim", price: "R$28,00" },
      { id: 4, name: "Mooncat 🐈‍⬛", description: "Pet com efeitos especiais, próprio para Glitchs", price: "R$4,50" },
      { id: 5, name: "Red Fox 🦊", description: "Rouba Fruta de algum jogador", price: "R$7,00" },
      { id: 6, name: "Toucan 🦜", description: "Aumenta o tamanho de frutas tropicais, procurado por conta de Glitch", price: "R$4,00" },
      { id: 7, name: "744t Money 💸", description: "Dinheiro, entrega manual.", price: "R$5,50" },
      { id: 8, name: "10t Money 💸", description: "Dinheiro, entrega manual", price: "R$4,00" },
      { id: 9, name: "1t Money 💸", description: "Dinheiro, Entrega manual", price: "R$3,00" },
      { id: 10, name: "Money 1t-744t 💸", description: "Quantidade aleatória de dinheiro", price: "R$3,00" }
    ],
    roubeumbrainrot: [
      { id: 11, name: "Conta Brainrot Rara", description: "Conta com itens exclusivos.", price: "R$50,00" },
      { id: 12, name: "Vip Brainrot 30 dias", description: "Acesso VIP ao servidor.", price: "R$40,00" },
      { id: 13, name: "Skin Exclusiva", description: "Visual diferenciado para seu personagem.", price: "R$35,00" },
      { id: 14, name: "Pacote de Moedas", description: "1000 moedas para gastar.", price: "R$15,00" },
      { id: 15, name: "Conta Brainrot Média", description: "Conta com bons recursos.", price: "R$30,00" },
      { id: 16, name: "Pet Brainrot", description: "Pet único para seu personagem.", price: "R$25,00" },
      { id: 17, name: "Boost XP", description: "Aumenta XP em 50% por 1 dia.", price: "R$10,00" },
      { id: 18, name: "Pacote Inicial", description: "Itens básicos para começar.", price: "R$8,00" },
      { id: 19, name: "Vip Brainrot 7 dias", description: "Acesso VIP temporário.", price: "R$12,00" },
      { id: 20, name: "Pacote de Itens Raros", description: "Itens colecionáveis.", price: "R$28,00" }
    ],
    bloxfruits: [
      { id: 21, name: "Fruta Legendária", description: "Poderes incríveis para seu personagem.", price: "R$60,00" },
      { id: 22, name: "Conta Blox Fruits", description: "Conta com várias frutas desbloqueadas.", price: "R$55,00" },
      { id: 23, name: "Espada Exótica", description: "Arma rara para batalhas.", price: "R$40,00" },
      { id: 24, name: "Moedas Blox", description: "Pacote com 500 moedas.", price: "R$20,00" },
      { id: 25, name: "Boost de Ataque", description: "Aumenta dano em 30%.", price: "R$18,00" },
      { id: 26, name: "Habilidade Especial", description: "Nova habilidade para seu personagem.", price: "R$38,00" },
      { id: 27, name: "Skin Personalizada", description: "Visual exclusivo.", price: "R$25,00" },
      { id: 28, name: "Conta VIP", description: "Acesso VIP ao servidor.", price: "R$50,00" },
      { id: 29, name: "Pacote Inicial", description: "Itens básicos para começar.", price: "R$12,00" },
      { id: 30, name: "Armadura Forte", description: "Proteção extra para seu personagem.", price: "R$45,00" }
    ]
  };

  // Estado atual
  let currentCategory = 'growagarden';
  let loggedInUser = null;

  // Elementos
  const filters = document.querySelectorAll('#filters button');
  const productsContainer = document.getElementById('products-container');
  const userInfo = document.getElementById('user-info');
  const userNameSpan = document.getElementById('user-name');
  const logoutBtn = document.getElementById('logout-btn');
  const loginRegisterButtons = document.getElementById('login-register-buttons');

  // Modais
  const modalLogin = document.getElementById('modal-login');
  const modalRegister = document.getElementById('modal-register');
  const purchaseModal = document.getElementById('purchase-modal');

  // Botões dentro dos modais
  const loginSubmitBtn = document.getElementById('login-submit');
  const registerSubmitBtn = document.getElementById('register-submit');
  const loginEmailInput = document.getElementById('login-email');
  const loginPasswordInput = document.getElementById('login-password');
  const registerEmailInput = document.getElementById('register-email');
  const registerPasswordInput = document.getElementById('register-password');

  // Compra
  const purchaseInfo = document.getElementById('purchase-info');
  const pixCodeTextarea = document.getElementById('pix-code');
  const confirmPaymentBtn = document.getElementById('confirm-payment-btn');

  // Notificações
  const notificationContainer = document.getElementById('notification-container');

  // Discord e ajuda
  const discordButton = document.getElementById('discord-button');
  const helpButton = document.getElementById('help-button');

  // Função para mostrar notificação
  function showNotification(message, type = 'info') {
    const notif = document.createElement('div');
    notif.className = `notification ${type}`;
    notif.textContent = message;
    notif.tabIndex = 0;
    notif.setAttribute('role', 'alert');

    notif.addEventListener('click', () => {
      notif.style.animation = 'fadeOut 0.5s ease forwards';
      notif.addEventListener('animationend', () => notif.remove());
    });

    notificationContainer.appendChild(notif);

    // Remove após 5s
    setTimeout(() => {
      notif.style.animation = 'fadeOut 0.5s ease forwards';
      notif.addEventListener('animationend', () => notif.remove());
    }, 5000);
  }

  // Renderiza produtos conforme categoria atual
  function renderProducts() {
    productsContainer.innerHTML = '';
    const list = products[currentCategory] || [];

    if(list.length === 0) {
      productsContainer.innerHTML = `<p style="text-align:center; color:#ff4444;">Nenhum produto encontrado nesta categoria.</p>`;
      return;
    }

    list.forEach(prod => {
      const card = document.createElement('article');
      card.className = 'product-card';
      card.tabIndex = 0;
      card.setAttribute('aria-label', `${prod.name}, preço ${prod.price}`);

      card.innerHTML = `
        <h3>${prod.name}</h3>
        <p>${prod.description}</p>
        <div class="product-price">${prod.price}</div>
        <button class="buy-btn" aria-label="Comprar ${prod.name}" data-id="${prod.id}">Comprar</button>
      `;

      productsContainer.appendChild(card);
    });
  }

  // Trocar categoria ao clicar nos filtros
  filters.forEach(btn => {
    btn.addEventListener('click', () => {
      filters.forEach(b => {
        b.classList.remove('active');
        b.setAttribute('aria-pressed', 'false');
      });
      btn.classList.add('active');
      btn.setAttribute('aria-pressed', 'true');

      currentCategory = btn.dataset.category;
      renderProducts();
    });
  });

  // Mostrar modais
  function openModal(modal) {
    modal.setAttribute('aria-hidden', 'false');
  }

  // Fechar modais
  function closeModal(modal) {
    modal.setAttribute('aria-hidden', 'true');
  }

  // Fechar modais ao clicar no botão de fechar
  document.querySelectorAll('.modal-close').forEach(btn => {
    btn.addEventListener('click', () => {
      const modal = btn.closest('.modal');
      closeModal(modal);
    });
  });

  // Fechar modais ao clicar fora do conteúdo modal
  document.querySelectorAll('.modal').forEach(modal => {
    modal.addEventListener('click', (e) => {
      if(e.target === modal) {
        closeModal(modal);
      }
    });
  });

  // Abrir modais de login e registro pelos botões externos
  document.getElementById('btn-login').addEventListener('click', () => {
    openModal(modalLogin);
  });
  document.getElementById('btn-register').addEventListener('click', () => {
    openModal(modalRegister);
  });

  // Alternar entre login e registro dentro dos modais
  document.getElementById('open-register').addEventListener('click', () => {
    closeModal(modalLogin);
    openModal(modalRegister);
  });
  document.getElementById('open-login').addEventListener('click', () => {
    closeModal(modalRegister);
    openModal(modalLogin);
  });

  // Simples sistema de usuários com localStorage
  // (Apenas para demonstração. NÃO usar em produção sem backend seguro)
  function saveUser(email, password) {
    const users = JSON.parse(localStorage.getItem('users') || '{}');
    if(users[email]) return false; // já existe
    users[email] = { password };
    localStorage.setItem('users', JSON.stringify(users));
    return true;
  }
  function checkUser(email, password) {
    const users = JSON.parse(localStorage.getItem('users') || '{}');
    if(users[email] && users[email].password === password) return true;
    return false;
  }
  function loginUser(email) {
    loggedInUser = email;
    localStorage.setItem('loggedInUser', email);
    updateUIForLoggedInUser();
  }
  function logoutUser() {
    loggedInUser = null;
    localStorage.removeItem('loggedInUser');
    updateUIForLoggedOutUser();
  }

  // Atualiza a interface para usuário logado
  function updateUIForLoggedInUser() {
    userNameSpan.textContent = loggedInUser;
    userInfo.style.display = 'block';
    loginRegisterButtons.style.display = 'none';
  }

  // Atualiza a interface para usuário deslogado
  function updateUIForLoggedOutUser() {
    userInfo.style.display = 'none';
    loginRegisterButtons.style.display = 'flex';
  }

  // Verificar login persistente ao carregar
  const savedUser = localStorage.getItem('loggedInUser');
  if(savedUser) {
    loggedInUser = savedUser;
    updateUIForLoggedInUser();
  }

  // Eventos dos botões de login e registro
  loginSubmitBtn.addEventListener('click', () => {
    const email = loginEmailInput.value.trim();
    const pass = loginPasswordInput.value.trim();
    if(!email || !pass) {
      showNotification('Por favor, preencha todos os campos.', 'error');
      return;
    }
    if(checkUser(email, pass)) {
      loginUser(email);
      closeModal(modalLogin);
      showNotification(`Bem-vindo(a), ${email}!`, 'success');
      loginEmailInput.value = '';
      loginPasswordInput.value = '';
    } else {
      showNotification('Email ou senha incorretos.', 'error');
    }
  });

  registerSubmitBtn.addEventListener('click', () => {
    const email = registerEmailInput.value.trim();
    const pass = registerPasswordInput.value.trim();
    if(!email || !pass) {
      showNotification('Por favor, preencha todos os campos.', 'error');
      return;
    }
    if(saveUser(email, pass)) {
      showNotification('Conta criada com sucesso! Faça login.', 'success');
      closeModal(modalRegister);
      registerEmailInput.value = '';
      registerPasswordInput.value = '';
    } else {
      showNotification('Email já está cadastrado.', 'error');
    }
  });

  // Logout
  logoutBtn.addEventListener('click', () => {
    logoutUser();
    showNotification('Você saiu da sua conta.', 'info');
  });

  // Evento para abrir modal de compra
  productsContainer.addEventListener('click', e => {
    if(e.target.classList.contains('buy-btn')) {
      if(!loggedInUser) {
        showNotification('Faça login para comprar.', 'error');
        openModal(modalLogin);
        return;
      }
      const productId = e.target.dataset.id;
      const product = Object.values(products).flat().find(p => p.id == productId);
      if(!product) return;

      purchaseInfo.textContent = `Você está comprando: ${product.name} - ${product.price}`;
      pixCodeTextarea.value = 
`00020126460014BR.GOV.BCB.PIX0124willianvss0011@gmail.com52040000530398654045.005802BR5921Willian Cabral Aguiar6009Sao Paulo62070503***6304A09A`;

      openModal(purchaseModal);
    }
  });

  // Botão confirmar pagamento
  confirmPaymentBtn.addEventListener('click', () => {
    showNotification('Pagamento Pendente, Entre no Nosso Grupo para Confirmar a Compra!', 'success');
    closeModal(purchaseModal);
  });

  // Abrir Discord no clique
  discordButton.addEventListener('click', () => {
    window.open('https://discord.gg/TEHhRXC2Pb', '_blank');
  });
  helpButton.addEventListener('click', () => {
    window.open('https://discord.gg/TEHhRXC2Pb', '_blank');
  });

  // Inicializa página
  renderProducts();

})();
</script>
</body>
</html>

